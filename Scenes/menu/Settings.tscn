[gd_scene load_steps=12 format=2]

[ext_resource path="res://Sprites/icons/checkbox-off.png" type="Texture" id=1]
[ext_resource path="res://Sprites/icons/right.png" type="Texture" id=2]
[ext_resource path="res://Sprites/icons/left.png" type="Texture" id=3]
[ext_resource path="res://Sprites/icons/checkbox-on.png" type="Texture" id=4]
[ext_resource path="res://Fonts/PressStart_Res/Pixel_font_small.tres" type="DynamicFont" id=5]
[ext_resource path="res://Scenes/templates/Button.tscn" type="PackedScene" id=6]

[sub_resource type="GDScript" id=1]
resource_name = "Main"
script/source = "extends Control

# Labels
export (NodePath) var ost_text
export (NodePath) var fx_text


# Update labels
func update_text(val : float, obj : String) -> void:
	get_node(obj).text = str(round((val+35)/35*100)) + \"%\"


func music(delta : int) -> void:
	FX.btn_click()
	MUSIC.volume += delta
	update_text(MUSIC.volume, ost_text)


func effects(delta : int) -> void:
	FX.btn_click()
	FX.volume += delta
	update_text(FX.volume, fx_text)


func reset_music_volume() -> void:
	FX.btn_click()
	MUSIC.volume = 0
	update_text(0, ost_text)


func reset_effects_volume() -> void:
	FX.btn_click()
	FX.volume = 0
	update_text(0, fx_text)


func tab_changed(_tab):
	FX.btn_click()


# Sync
func _ready() -> void:
	update_text(FX.volume, fx_text)
	update_text(MUSIC.volume, ost_text)



func open_site():
	OS.shell_open(\"https://studentquest.github.io\")


func en():
	TranslationServer.set_locale(\"en\")


func ru():
	TranslationServer.set_locale(\"ru\")
"

[sub_resource type="StyleBoxFlat" id=2]
content_margin_left = 15.0
content_margin_right = 15.0
content_margin_top = 15.0
content_margin_bottom = 15.0
bg_color = Color( 0.0588235, 0.0588235, 0.0588235, 1 )

[sub_resource type="StyleBoxFlat" id=3]
content_margin_left = 15.0
content_margin_right = 15.0
content_margin_top = 15.0
content_margin_bottom = 15.0
bg_color = Color( 0.129412, 0.129412, 0.129412, 1 )

[sub_resource type="StyleBoxFlat" id=4]
bg_color = Color( 0.0605469, 0.0605469, 0.0605469, 1 )
corner_radius_bottom_right = 20
corner_radius_bottom_left = 20

[sub_resource type="GDScript" id=5]
script/source = "extends MarginContainer

# Интерфейс настроек
# Переносит значения настроек в интерфейс
# Содержит функции для обработки нажатия кнопок

export(NodePath) var vsync_toggle
export(NodePath) var fullscreen_toggle


# Полноэкранный режим
func toggle_fullscreen(state : bool) -> void:
	OS.window_fullscreen = state


# Вертикальная синхронизация
func toggle_vsync(state : bool) -> void:
	OS.vsync_enabled = state


# Синхронизировать интерфейс при загрузке
func _ready() -> void:
	get_node(vsync_toggle).pressed = OS.vsync_enabled
	get_node(fullscreen_toggle).pressed = OS.window_fullscreen
"

[node name="Settings" type="Control"]
size_flags_horizontal = 8
size_flags_vertical = 8
script = SubResource( 1 )
__meta__ = {
"_edit_use_anchors_": false
}
ost_text = NodePath("TabContainer/AUDIO/Audio/Music/HBoxContainer/Label")
fx_text = NodePath("TabContainer/AUDIO/Audio/Effects/HBoxContainer/Label")

[node name="TabContainer" type="TabContainer" parent="."]
margin_right = 790.0
margin_bottom = 476.0
rect_clip_content = true
size_flags_vertical = 3
size_flags_stretch_ratio = 7.0
custom_icons/increment_highlight = ExtResource( 2 )
custom_icons/increment = ExtResource( 2 )
custom_icons/decrement_highlight = ExtResource( 3 )
custom_icons/decrement = ExtResource( 3 )
custom_styles/tab_fg = SubResource( 2 )
custom_styles/tab_bg = SubResource( 3 )
custom_styles/panel = SubResource( 4 )
tab_align = 0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="LANG" type="MarginContainer" parent="TabContainer"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_top = 62.0
custom_constants/margin_right = 50
custom_constants/margin_top = 50
custom_constants/margin_left = 50
custom_constants/margin_bottom = 50

[node name="VBoxContainer" type="VBoxContainer" parent="TabContainer/LANG"]
margin_left = 50.0
margin_top = 50.0
margin_right = 740.0
margin_bottom = 364.0

[node name="English" parent="TabContainer/LANG/VBoxContainer" instance=ExtResource( 6 )]
margin_right = 690.0
btn_text = "English"

[node name="Russian" parent="TabContainer/LANG/VBoxContainer" instance=ExtResource( 6 )]
margin_top = 84.0
margin_right = 690.0
margin_bottom = 164.0
btn_text = "Russian"

[node name="AUDIO" type="MarginContainer" parent="TabContainer"]
visible = false
anchor_right = 1.0
anchor_bottom = 1.0
margin_top = 62.0
custom_constants/margin_right = 50
custom_constants/margin_top = 50
custom_constants/margin_left = 50
custom_constants/margin_bottom = 50

[node name="Audio" type="VBoxContainer" parent="TabContainer/AUDIO"]
margin_left = 50.0
margin_top = 50.0
margin_right = 741.0
margin_bottom = 384.0
custom_constants/separation = 60

[node name="Music" type="VBoxContainer" parent="TabContainer/AUDIO/Audio"]
margin_right = 691.0
margin_bottom = 137.0
size_flags_vertical = 3
custom_constants/separation = 25

[node name="Label" type="Label" parent="TabContainer/AUDIO/Audio/Music"]
margin_right = 691.0
margin_bottom = 32.0
size_flags_horizontal = 3
size_flags_vertical = 7
text = "MUSIC_VOLUME"
align = 1
valign = 1

[node name="HBoxContainer" type="HBoxContainer" parent="TabContainer/AUDIO/Audio/Music"]
margin_top = 57.0
margin_right = 691.0
margin_bottom = 137.0
size_flags_vertical = 3
custom_constants/separation = 50

[node name="ResetMusic" parent="TabContainer/AUDIO/Audio/Music/HBoxContainer" instance=ExtResource( 6 )]
margin_right = 285.0
rect_min_size = Vector2( 285, 80 )
btn_text = "RESET"

[node name="M-" parent="TabContainer/AUDIO/Audio/Music/HBoxContainer" instance=ExtResource( 6 )]
margin_left = 335.0
margin_right = 415.0
btn_text = "-"

[node name="Label" type="Label" parent="TabContainer/AUDIO/Audio/Music/HBoxContainer"]
margin_left = 465.0
margin_top = 28.0
margin_right = 561.0
margin_bottom = 52.0
size_flags_horizontal = 3
custom_fonts/font = ExtResource( 5 )
text = "100%"

[node name="M+" parent="TabContainer/AUDIO/Audio/Music/HBoxContainer" instance=ExtResource( 6 )]
margin_left = 611.0
margin_right = 691.0
btn_text = "+"

[node name="Effects" type="VBoxContainer" parent="TabContainer/AUDIO/Audio"]
margin_top = 197.0
margin_right = 691.0
margin_bottom = 334.0
size_flags_vertical = 3
custom_constants/separation = 25

[node name="Label" type="Label" parent="TabContainer/AUDIO/Audio/Effects"]
margin_right = 691.0
margin_bottom = 32.0
size_flags_vertical = 7
text = "EFFECTS_VOLUME"
align = 1
valign = 1

[node name="HBoxContainer" type="HBoxContainer" parent="TabContainer/AUDIO/Audio/Effects"]
margin_top = 57.0
margin_right = 691.0
margin_bottom = 137.0
size_flags_vertical = 3
custom_constants/separation = 50

[node name="ResetEffects" parent="TabContainer/AUDIO/Audio/Effects/HBoxContainer" instance=ExtResource( 6 )]
margin_right = 285.0
rect_min_size = Vector2( 285, 80 )
btn_text = "RESET"

[node name="E-" parent="TabContainer/AUDIO/Audio/Effects/HBoxContainer" instance=ExtResource( 6 )]
margin_left = 335.0
margin_right = 415.0
btn_text = "-"

[node name="Label" type="Label" parent="TabContainer/AUDIO/Audio/Effects/HBoxContainer"]
margin_left = 465.0
margin_top = 28.0
margin_right = 561.0
margin_bottom = 52.0
size_flags_horizontal = 3
custom_fonts/font = ExtResource( 5 )
text = "78%"

[node name="E+" parent="TabContainer/AUDIO/Audio/Effects/HBoxContainer" instance=ExtResource( 6 )]
margin_left = 611.0
margin_right = 691.0
btn_text = "+"

[node name="GRAPHICS" type="MarginContainer" parent="TabContainer"]
visible = false
anchor_right = 1.0
anchor_bottom = 1.0
margin_top = 62.0
custom_constants/margin_right = 50
custom_constants/margin_top = 50
custom_constants/margin_left = 50
custom_constants/margin_bottom = 50
script = SubResource( 5 )
vsync_toggle = NodePath("../GRAPHICS/VBoxContainer/CheckButton")
fullscreen_toggle = NodePath("../GRAPHICS/VBoxContainer/CheckButton2")

[node name="VBoxContainer" type="VBoxContainer" parent="TabContainer/GRAPHICS"]
margin_left = 50.0
margin_top = 50.0
margin_right = 740.0
margin_bottom = 364.0

[node name="CheckButton" type="CheckButton" parent="TabContainer/GRAPHICS/VBoxContainer"]
margin_right = 691.0
margin_bottom = 80.0
rect_min_size = Vector2( 0, 80 )
size_flags_horizontal = 3
custom_icons/off = ExtResource( 1 )
custom_icons/on = ExtResource( 4 )
text = "VSYNC"

[node name="CheckButton2" type="CheckButton" parent="TabContainer/GRAPHICS/VBoxContainer"]
margin_top = 84.0
margin_right = 691.0
margin_bottom = 164.0
rect_min_size = Vector2( 0, 80 )
size_flags_horizontal = 3
custom_icons/off = ExtResource( 1 )
custom_icons/on = ExtResource( 4 )
text = "FULLSCREEN"

[node name="INFO" type="MarginContainer" parent="TabContainer"]
visible = false
anchor_right = 1.0
anchor_bottom = 1.0
margin_top = 62.0
custom_constants/margin_right = 50
custom_constants/margin_top = 50
custom_constants/margin_left = 50
custom_constants/margin_bottom = 50

[node name="ScrollContainer" type="ScrollContainer" parent="TabContainer/INFO"]
margin_left = 50.0
margin_top = 50.0
margin_right = 740.0
margin_bottom = 364.0
size_flags_vertical = 3
scroll_horizontal_enabled = false

[node name="MarginContainer" type="MarginContainer" parent="TabContainer/INFO/ScrollContainer"]
margin_right = 690.0
margin_bottom = 1118.0
mouse_filter = 1
size_flags_horizontal = 3
custom_constants/margin_right = 20

[node name="VBoxContainer" type="VBoxContainer" parent="TabContainer/INFO/ScrollContainer/MarginContainer"]
margin_right = 670.0
margin_bottom = 1118.0
size_flags_horizontal = 3
custom_constants/separation = 20

[node name="ColorRect" parent="TabContainer/INFO/ScrollContainer/MarginContainer/VBoxContainer" instance=ExtResource( 6 )]
margin_right = 659.0
btn_text = "OPENSITE"

[node name="Site" type="Label" parent="TabContainer/INFO/ScrollContainer/MarginContainer/VBoxContainer"]
margin_top = 100.0
margin_right = 659.0
margin_bottom = 178.0
size_flags_horizontal = 3
custom_fonts/font = ExtResource( 5 )
text = "studentquest.github.io

v 3.3"
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Godot" type="Label" parent="TabContainer/INFO/ScrollContainer/MarginContainer/VBoxContainer"]
margin_top = 198.0
margin_right = 659.0
margin_bottom = 222.0
size_flags_horizontal = 3
custom_fonts/font = ExtResource( 5 )
text = "GODOT"
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Changelog" type="Label" parent="TabContainer/INFO/ScrollContainer/MarginContainer/VBoxContainer"]
margin_top = 242.0
margin_right = 659.0
margin_bottom = 266.0
size_flags_horizontal = 3
custom_fonts/font = ExtResource( 5 )
text = "CHANGELOG"
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Changes" type="Label" parent="TabContainer/INFO/ScrollContainer/MarginContainer/VBoxContainer"]
margin_top = 286.0
margin_right = 659.0
margin_bottom = 310.0
size_flags_horizontal = 3
custom_fonts/font = ExtResource( 5 )
text = "CHANGES"
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Authors" type="Label" parent="TabContainer/INFO/ScrollContainer/MarginContainer/VBoxContainer"]
margin_top = 330.0
margin_right = 659.0
margin_bottom = 354.0
size_flags_horizontal = 3
custom_fonts/font = ExtResource( 5 )
text = "AUTHORS"
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Nicks" type="Label" parent="TabContainer/INFO/ScrollContainer/MarginContainer/VBoxContainer"]
margin_top = 374.0
margin_right = 659.0
margin_bottom = 452.0
size_flags_horizontal = 3
custom_fonts/font = ExtResource( 5 )
text = "- mcraw
- friday13
"
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Joystick" type="Label" parent="TabContainer/INFO/ScrollContainer/MarginContainer/VBoxContainer"]
margin_top = 472.0
margin_right = 659.0
margin_bottom = 496.0
size_flags_horizontal = 3
custom_fonts/font = ExtResource( 5 )
text = "JOYSTICK"
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Gonkee" type="Label" parent="TabContainer/INFO/ScrollContainer/MarginContainer/VBoxContainer"]
margin_top = 516.0
margin_right = 659.0
margin_bottom = 648.0
size_flags_horizontal = 3
custom_fonts/font = ExtResource( 5 )
text = "Gonkee - https://youtu.be/uGyEP2LUFPg

"
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Songs" type="Label" parent="TabContainer/INFO/ScrollContainer/MarginContainer/VBoxContainer"]
margin_top = 516.0
margin_right = 659.0
margin_bottom = 648.0
size_flags_horizontal = 3
custom_fonts/font = ExtResource( 5 )
text = "Some sounds were downloaded from freesound.org/people/klankbeeld

"
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Contact" type="Label" parent="TabContainer/INFO/ScrollContainer/MarginContainer/VBoxContainer"]
margin_top = 945.0
margin_right = 659.0
margin_bottom = 969.0
size_flags_horizontal = 3
custom_fonts/font = ExtResource( 5 )
text = "CONTACT"
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Mail" type="Label" parent="TabContainer/INFO/ScrollContainer/MarginContainer/VBoxContainer"]
margin_top = 989.0
margin_right = 659.0
margin_bottom = 1013.0
size_flags_horizontal = 3
custom_fonts/font = ExtResource( 5 )
text = "our@mail.com"
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="SupportUs" type="Label" parent="TabContainer/INFO/ScrollContainer/MarginContainer/VBoxContainer"]
margin_top = 1033.0
margin_right = 659.0
margin_bottom = 1057.0
size_flags_horizontal = 3
custom_fonts/font = ExtResource( 5 )
text = "SUPPORT"
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Btc" type="Label" parent="TabContainer/INFO/ScrollContainer/MarginContainer/VBoxContainer"]
margin_top = 1077.0
margin_right = 659.0
margin_bottom = 1128.0
size_flags_horizontal = 3
custom_fonts/font = ExtResource( 5 )
text = "btc: ...
eth: ..."
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Legal" type="Label" parent="TabContainer/INFO/ScrollContainer/MarginContainer/VBoxContainer"]
margin_top = 1148.0
margin_right = 659.0
margin_bottom = 1172.0
size_flags_horizontal = 3
custom_fonts/font = ExtResource( 5 )
text = "LEGAL"
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Copyright" type="Label" parent="TabContainer/INFO/ScrollContainer/MarginContainer/VBoxContainer"]
margin_top = 1192.0
margin_right = 659.0
margin_bottom = 1216.0
size_flags_horizontal = 3
custom_fonts/font = ExtResource( 5 )
text = "© 2020"
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}
[connection signal="tab_changed" from="TabContainer" to="." method="tab_changed"]
[connection signal="pressed" from="TabContainer/LANG/VBoxContainer/English" to="." method="en"]
[connection signal="pressed" from="TabContainer/LANG/VBoxContainer/Russian" to="." method="ru"]
[connection signal="pressed" from="TabContainer/AUDIO/Audio/Music/HBoxContainer/ResetMusic" to="." method="reset_music_volume"]
[connection signal="pressed" from="TabContainer/AUDIO/Audio/Music/HBoxContainer/M-" to="." method="music" binds= [ -5 ]]
[connection signal="pressed" from="TabContainer/AUDIO/Audio/Music/HBoxContainer/M+" to="." method="music" binds= [ 5 ]]
[connection signal="pressed" from="TabContainer/AUDIO/Audio/Effects/HBoxContainer/ResetEffects" to="." method="reset_effects_volume"]
[connection signal="pressed" from="TabContainer/AUDIO/Audio/Effects/HBoxContainer/E-" to="." method="effects" binds= [ -5 ]]
[connection signal="pressed" from="TabContainer/AUDIO/Audio/Effects/HBoxContainer/E+" to="." method="effects" binds= [ 5 ]]
[connection signal="toggled" from="TabContainer/GRAPHICS/VBoxContainer/CheckButton" to="TabContainer/GRAPHICS" method="toggle_vsync"]
[connection signal="toggled" from="TabContainer/GRAPHICS/VBoxContainer/CheckButton2" to="TabContainer/GRAPHICS" method="toggle_fullscreen"]
[connection signal="pressed" from="TabContainer/INFO/ScrollContainer/MarginContainer/VBoxContainer/ColorRect" to="." method="open_site"]
